# RusTorch Development Dockerfile
# Optimized for development with hot reloading and debugging tools

FROM rust:1.75

# Install development dependencies
RUN apt-get update && apt-get install -y \
    build-essential \
    pkg-config \
    libssl-dev \
    cmake \
    clang \
    lldb \
    gdb \
    valgrind \
    python3 \
    python3-dev \
    python3-pip \
    nodejs \
    npm \
    curl \
    git \
    vim \
    htop \
    && rm -rf /var/lib/apt/lists/*

# Install Rust development tools
RUN rustup component add rustfmt clippy rust-src
RUN cargo install cargo-watch cargo-edit cargo-audit cargo-outdated cargo-tree

# Install Python development tools
RUN pip3 install --no-cache-dir \
    jupyter \
    matplotlib \
    numpy \
    pandas \
    seaborn \
    pytest

# Create workspace
WORKDIR /workspace

# Set environment for development
ENV RUST_LOG=debug
ENV RUST_BACKTRACE=1
ENV RUSTORCH_ENV=development

# Expose ports for development servers
EXPOSE 8080 8888

# Default command for development
CMD ["bash"]